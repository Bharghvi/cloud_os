{% extends 'cloud/base.html' %}
{% load static from staticfiles %}

{% block content %}

<div class="instanceC">

  <h3 >Virtual Machines</h3>



  <div class="vms">
    {% for vm in allvms %}
    <span class="box"><img src="{% static 'comp.png' %}" alt=""><div class="more">  <span class="more">{{vm.name}}</span> <span> <img onclick="" class="more" src="{% static 'menu.png' %}" alt="" data-toggle="modal" data-target="#vm{{vm.id}}"> </span> </div></span>
    {% endfor %}
    <span class="box"><img class="plus" src="{% static 'plus.png' %}" alt="" data-toggle="modal" data-target="#formModal"><div class="more"> Add VM </div></span>
  </div>

  {% for vm in allvms %}
    <div class="modal fade" id="vm{{vm.id}}" role="dialog">
      <div class="modal-dialog">

        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Details of {{vm.name}}</h4>
          </div>
          <div class="modal-body">
            <ul>
              <li>RAM: {{vm.ram}}</li>
              <li>DISK: {{vm.disk}}</li>
              <li>CPUs: {{vm.cpus}}</li>
              <li>Task State: {{vm.task_state}}</li>
              <li>VM State: {{vm.vm_state}}</li>
              <li>Status: {{vm.status}}</li>
              {% if vm.url %}
              <li>Link To Console: <a href="{{vm.url}}" target="_blank">{{vm.url}}</a> </li>
              {% endif %}
            </ul>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>

      </div>
    </div>
     {% endfor %}

    <div class="modal fade" id="formModal" role="dialog">
      <div class="modal-dialog">

        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">VM Specifications</h4>
          </div>
          <div class="modal-body">
            <form method="POST" action="/launchInstance/">
              {% csrf_token %}
              <div class="form-group">
                <label for="username">Instance Name:</label>
                <input type="text" class="form-control" id="instanceName" placeholder="Enter Instance Name" name="instanceName" value="test-webd">
              </div>

              <label>Flavor</label>
              <br>
              <label class="radio-inline"><input id="tiny" type="radio" name="flavor" value="tiny" checked>Tiny (RAM: 512MB, Root-Disk: 1GB, VCPUs: 1)</label>
              <br>
              <label class="radio-inline"><input id="m1.small" type="radio" name="flavor" value="m1.small">m1.small  (RAM: 2GB, Root-Disk: 20GB, VCPUs: 1)</label>
              <br>
              <label class="radio-inline"><input id="ds2G" type="radio" name="flavor" value="ds2G">ds2G  (RAM: 2GB, Root-Disk: 10GB, VCPUs: 2)</label>
              <br>
              <br>
              <label>OS type</label>
              <br>
              <label class="radio-inline" id="123"><input id="cirros-server" type="radio" name="image" value="cirros-server" checked>CirrOS Server</label>
              <label class="radio-inline"><input id="fedora-server" type="radio" name="image" value="fedora-server">Fedora Server</label>
              <label class="radio-inline"><input id="ubuntu-server" type="radio" name="image" value="ubuntu-server">Ubuntu Server</label>
              <!-- <label class="radio-inline"><input id="lubuntu-gui" type="radio" name="image" value="lubuntu-gui">Lubuntu Desktop (GUI, Choose ram>1gb and disk>20gb)</label> -->
              <br>
              <br>
                  <button type="submit" class="btn btn-default" id="launch">Launch</button>
                </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>

      </div>
    </div>


  </div>
{% endblock %}
